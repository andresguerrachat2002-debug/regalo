<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Regalito especial</title>
<script src="https://www.youtube.com/iframe_api"></script>
<style>
  :root{--bg1:#ad34d9;--bg2:#d52c72;--text:#fffde7;--yellow:#ffd43b;--yellow2:#ffea70;--pink1:#ff6fa3;--pink2:#ffb6d5;--pink3:#ffe3f0}

  *{box-sizing:border-box}
  html,body{min-height:100dvh}
  body{
    margin:0; font-family:system-ui,Segoe UI,Roboto,Arial; color:var(--text);
    background:linear-gradient(160deg,var(--bg1),var(--bg2) 70%);
    overflow:auto; /* permitir scroll global */
  }

  .vista{
    position:relative;        /* antes era absolute */
    min-height:100dvh;        /* altura real de pantalla */
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    padding:20px; gap:16px;
  }
  .hidden{display:none}

  /* VISTA 1 */
  .card{width:min(900px,95vw); backdrop-filter:blur(8px) saturate(130%);
        background:rgba(255,255,255,.10); border:1px solid rgba(255,255,255,.18);
        border-radius:22px; padding:28px 22px; text-align:center;
        box-shadow:0 10px 30px rgba(0,0,0,.35); position:relative}
  h1{margin:0 0 8px; font-size:clamp(26px,5.5vw,48px); font-weight:900; text-shadow:0 2px 18px rgba(0,0,0,.35)}
  .accent{color:var(--yellow2)} .subtitle{margin:0 0 16px; opacity:.95; font-size:clamp(14px,2.5vw,18px)}
  .msgs{display:grid; gap:10px; margin:18px 0}
  .msgs p{margin:0; padding:12px 14px; border-radius:14px; background:rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.18)}
  .btn{appearance:none; border:0; cursor:pointer; padding:12px 18px; border-radius:14px; font-weight:800; font-size:16px;
       background:linear-gradient(180deg,var(--yellow2),var(--yellow)); color:#222; box-shadow:0 6px 22px rgba(253,187,45,.35); transition:transform .15s}
  .btn:hover{transform:translateY(-2px)}

  /* V1 intensa */
  .v1{
    background:
      radial-gradient(900px 500px at 70% -10%, rgba(255,105,180,.5) 0%, transparent 45%),
      linear-gradient(160deg, #c2185b, #ad1457 55%, #880e4f);
    overflow:hidden; /* solo V1 sin scroll a prop√≥sito */
  }
  .hearts{position:fixed; inset:0; overflow:hidden; pointer-events:none; z-index:0}
  .heart{position:absolute; width:24px; height:24px; transform:rotate(45deg); background:currentColor; border-radius:4px; opacity:.85;
         animation:rise var(--dur) linear forwards; filter:drop-shadow(0 6px 10px rgba(0,0,0,.25))}
  .heart::before,.heart::after{content:""; position:absolute; width:24px; height:24px; background:currentColor; border-radius:50%}
  .heart::before{left:-12px; top:0} .heart::after{left:0; top:-12px}
  @keyframes rise{from{transform:translateY(40vh) rotate(45deg); opacity:0} 15%{opacity:.9} to{transform:translateY(-110vh) rotate(45deg); opacity:0}}

  /* Estallido corazones click */
  .burst-layer{position:fixed; inset:0; pointer-events:none; z-index:5}
  .burst-heart{position:absolute; width:18px; height:18px; transform:rotate(45deg); background:currentColor; border-radius:5px; opacity:0;
               animation:pop .9s ease-out forwards; filter:drop-shadow(0 6px 10px rgba(0,0,0,.25))}
  .burst-heart::before,.burst-heart::after{content:""; position:absolute; width:18px; height:18px; background:currentColor; border-radius:50%}
  .burst-heart::before{left:-9px; top:0} .burst-heart::after{left:0; top:-9px}
  @keyframes pop{0%{transform:translate(var(--dx,0),var(--dy,0)) scale(.6) rotate(45deg); opacity:0} 20%{opacity:1} 100%{transform:translate(var(--dx,0),var(--dy,0)) scale(1.1) rotate(45deg); opacity:0}}

  /* VISTA 2: negro y con scroll */
  .v2{ background:#000; overflow:auto; }
  #wrapV2{
    position:relative; width:100%; max-width:980px;
    display:flex; flex-direction:column; align-items:center; gap:16px;
    padding:16px 16px 24vh;   /* extra espacio abajo para scroll c√≥modo */
  }

  /* Capas */
  .frame{ z-index:3; }
  #fw{ z-index:9; }
  .love-notes{ z-index:10; }

  /* Canvas fuegos: fijo para que se vea mientras haces scroll */
  #fw{position:fixed; inset:0; pointer-events:none}

  /* Marco e imagen */
  .frame{
    position:relative; padding:10px; border-radius:20px;
    background:conic-gradient(from 0deg,#ffffff,#fffbe6,#ffe88a,#ffd84d,#ffffff);
    box-shadow:0 0 24px rgba(255,255,230,.70),0 0 64px rgba(255,221,77,.45),inset 0 1px 0 rgba(255,255,255,.7);
    opacity:0; transform:scale(.95) translateY(8px); transition:opacity .6s ease, transform .6s ease;
  }
  .frame::after{content:""; position:absolute; inset:-12px; border-radius:24px; z-index:-1;
    background:radial-gradient(closest-side,rgba(255,255,255,.45),rgba(255,234,120,.35),transparent 60%); filter:blur(10px)}
  .frame.show{opacity:1; transform:scale(1) translateY(0)}
  .frame img{display:block; width:min(68vw,480px); height:auto; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,.28)}

  /* Mensajes */
  .love-notes{position:relative; width:min(92vw,840px); display:grid; gap:10px;
              grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
  .love-notes p{margin:0; padding:12px 14px; border-radius:14px; background:rgba(255,255,255,.12);
                border:1px solid rgba(255,255,255,.18); box-shadow:0 8px 24px rgba(0,0,0,.18);
                backdrop-filter:blur(6px); font-size:clamp(14px,2.4vw,18px)}
</style>
</head>
<body>
  <div class="burst-layer" id="burst"></div>

  <!-- VISTA 1 -->
  <section id="v1" class="vista v1">
    <div class="card">
      <div class="hearts" id="hearts" aria-hidden="true"></div>
      <h1><span class="accent">Regalito especial</span> para una personita especial</h1>
      <p><span class="accent">Mar√≠a Elena Duarte Mart√≠nez</span>, esto es para ti mi amorcito üíõ</p>
      <div class="msgs">
        <p>te amo mucho mi amor, la verdad no tengo mucho para darte pero espero que este peque√±o detalle te guste
          fue hecho con mucho amor y cari√±o para usted.</p>
        <p>una ves mas te digo lo mucho q te amo y lo mucho que estoy enamorado te di mi amor.</p>
        <p>te doy las gracias por quedarte cuando todo se puso dif√≠cil y apoyarme con un aliento para seguir adelante 
          nunca olvidare esos detallitos tan importante para mi, mi vida mia.</p>
        <p>ojal√° este regalo te recuerde cu√°nto vales para m√≠: que cada detalle est√° pensado para verte sonre√≠r, 
          que en cada p√©talo va un ‚Äúte elijo‚Äù y en cada color mi gratitud por tu vida; no tengo todo, pero tengo este 
          coraz√≥n sincero que hoy y siempre quiere cuidarte, apoyarte y caminar contigo.</p>
      </div>
      <button id="abrir" class="btn">üéÅ Abrir regalo</button>
    </div>
  </section>

  <!-- VISTA 2 -->
  <section id="v2" class="vista v2 hidden">
    <div id="wrapV2">
      <div class="frame"><img id="foto" alt="Ramo de girasoles"></div>

      <div class="love-notes" id="notes">
        <p>hoy te regalo estas peque√±as flores amarillas y una promesa sencilla: elegirte a ti en los dias malos y buenos y
          recordarte lo valiosa que eres nunca lo olvides.</p>
        <p>si alguna vez dudas de mi, mira este detalle y piensa en mi abrazo aqu√≠ estoy, para cuidarte, 
          para celebrar tus logros y tenderte de la mano a lado mio</p>
        <p>me enamora la forma en que miras la vida por eso quiero ser tu compa√±ero en cada meta, 
          el descanso despu√©s de tus batallas y la risa que te devuelva el color cuando todo parezca gris
          contigo, mi futuro tiene nombre y hogar.</p>
        <p>no te prometo perfecci√≥n, te prometo presencia: conversar cuando haga falta, guardar silencio cuando lo necesites, 
          y sostenerte con ternura; este 21 de septiembre no es un d√≠a cualquiera, es otra oportunidad para decirte ‚Äúme quedo‚Äù.</p>
      </div>

      <canvas id="fw"></canvas>
    </div>
  </section>

  <div id="ytwrap" style="position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden"><div id="ytplayer"></div></div>

<script>
  const layer=document.getElementById('hearts'); const rand=(a,b)=>Math.random()*(b-a)+a;
  function spawn(){ const h=document.createElement('div'); h.className='heart';
    const size=rand(14,30); h.style.width=size+'px'; h.style.height=size+'px';
    h.style.left=rand(-5,100)+'%'; h.style.bottom=rand(-8,0)+'%'; h.style.setProperty('--dur', rand(8,16)+'s');
    h.style.color=['#ff8fb8','#ff6fa3','#ffc0d9','#ffd1e6'][(Math.random()*4)|0];
    layer.appendChild(h); setTimeout(()=>h.remove(),20000);}
  for(let i=0;i<18;i++) setTimeout(spawn,i*220);
  const bgTimer=setInterval(()=>{for(let i=0;i<3;i++) spawn();},1200);

  const burst=document.getElementById('burst'); const colorsB=['#ff6fa3','#ff8fb8','#ffc0d9','#ffd1e6','#ffd24a'];
  document.addEventListener('click',e=>{
    const x=e.clientX,y=e.clientY,n=14;
    for(let i=0;i<n;i++){
      const h=document.createElement('div'); h.className='burst-heart';
      h.style.left=(x-9)+'px'; h.style.top=(y-9)+'px'; h.style.color=colorsB[(Math.random()*colorsB.length)|0];
      const ang=(i/n)*Math.PI*2,dist=40+Math.random()*70;
      h.style.setProperty('--dx',Math.cos(ang)*dist+'px'); h.style.setProperty('--dy',Math.sin(ang)*dist+'px');
      burst.appendChild(h); setTimeout(()=>h.remove(),900);
    }
  });

  const v1=document.getElementById('v1'), v2=document.getElementById('v2'), btn=document.getElementById('abrir');

  function fireworksStart(){
    const c=document.getElementById('fw'), ctx=c.getContext('2d');
    let W,H,running=true,particles=[];
    function resize(){W=c.width=innerWidth;H=c.height=innerHeight;}
    resize(); addEventListener('resize',resize);

    function spawnFW(x=W*rand(.2,.8),y=H*rand(.2,.5)){
      const cols=['#ffe066','#ffd43b','#ff8fb8','#ff6fa3','#b197fc','#74c0fc','#63e6be'];
      const v=rand(2.5,4.2), n=120;
      for(let i=0;i<n;i++){
        const a=(i/n)*Math.PI*2, s=v*rand(.6,1.4);
        particles.push({x,y,vx:Math.cos(a)*s,vy:Math.sin(a)*s,life:rand(60,100),age:0,color:cols[(Math.random()*cols.length)|0]});
      }
    }

    let t=0, next=rand(60,110);
    (function loop(){
      if(!running) return;
      requestAnimationFrame(loop);
      ctx.clearRect(0,0,W,H);          // no tapar la foto
      ctx.globalCompositeOperation='lighter';

      if(++t>next){ t=0; next=rand(60,110); spawnFW(); }

      for(let i=particles.length-1;i>=0;i--){
        const p=particles[i];
        if(++p.age>p.life){ particles.splice(i,1); continue; }
        p.vy+=0.02; p.vx*=0.995; p.vy*=0.995;
        p.x+=p.vx; p.y+=p.vy;
        const a=Math.max(0,1-p.age/p.life);
        ctx.beginPath(); ctx.arc(p.x,p.y,1.6,0,Math.PI*2);
        ctx.fillStyle=`rgba(${hexToRgb(p.color)},${a})`; ctx.fill();
      }
    })();

    const container=document.getElementById('wrapV2');
    const onClick=e=>spawnFW(e.clientX,e.clientY);
    container.addEventListener('click',onClick);

    return ()=>{ running=false; removeEventListener('resize',resize); container.removeEventListener('click',onClick); };
  }

  let ytPlayer=null, ytReady=false;
  function onYouTubeIframeAPIReady(){
    ytPlayer=new YT.Player('ytplayer',{
      videoId:'PykXcyfPUk4', width:'1', height:'1',
      playerVars:{playsinline:1,rel:0,controls:0,modestbranding:1},
      events:{ onReady:()=>{ ytReady=true; } }
    });
  }

  let stopFW=null;
  btn.addEventListener('click', ()=>{
    v1.classList.add('hidden');
    v2.classList.remove('hidden');
    clearInterval(bgTimer);

    const marco=document.querySelector('.frame');
    const img=document.getElementById('foto');

    const IMG_URL='https://raw.githubusercontent.com/andresguerrachat2002-debug/regalo/main/Lucid_Origin_A_stunning_bouquet_of_approximately_10_large_brig_3.jpg';
    const FALLBACK='https://upload.wikimedia.org/wikipedia/commons/1/15/20140811_Sunflowers_Sonnenblumen_%2814631922670%29.jpg';

    img.onload=()=>marco.classList.add('show');
    img.onerror=()=>{ img.src=FALLBACK; marco.classList.add('show'); };
    img.src=IMG_URL;

    if(stopFW) stopFW();
    stopFW=fireworksStart();

    const play=()=>{ try{ ytPlayer.unMute(); ytPlayer.setVolume(100); ytPlayer.seekTo(0,true); ytPlayer.playVideo(); }catch(e){} };
    if(ytReady) play(); else { const t=setInterval(()=>{ if(ytReady){ clearInterval(t); play(); }},100); setTimeout(()=>clearInterval(t),5000); }
  });

  function hexToRgb(h){h=h.replace('#','');const n=parseInt(h,16);return[(n>>16)&255,(n>>8)&255,(n)&255].join(',')}
</script>
</body>
</html>
